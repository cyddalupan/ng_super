"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4197],{4197:(C,_,s)=>{s.r(_),s.d(_,{AgencyPageModule:()=>v});var d=s(6895),c=s(4556),u=s(433),f=s(3013),l=s(5861),e=s(8256),p=s(3949),m=s(5970);const y=["modal"];function A(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",7),e._uU(2),e.qZA(),e.TgZ(3,"ion-col",7),e._uU(4),e.qZA(),e.TgZ(5,"ion-col",7),e._uU(6),e.qZA(),e.TgZ(7,"ion-col",11),e._uU(8),e.qZA(),e.TgZ(9,"ion-col",13)(10,"i",18),e.NdJ("click",function(){const a=e.CHM(n).$implicit;return e.oxw().openModal(!0,a)}),e.qZA(),e.TgZ(11,"i",19),e.NdJ("click",function(){const a=e.CHM(n).$implicit;return e.oxw().deleteAgency(a.id)}),e.qZA()()()}if(2&i){const n=r.$implicit;e.xp6(2),e.Oqu(n.name),e.xp6(2),e.Oqu(n.address),e.xp6(2),e.Oqu(n.contact_email),e.xp6(2),e.Oqu(n.contact_phone)}}function Z(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar",20)(2,"ion-buttons",0)(3,"ion-button",21),e.NdJ("click",function(){return e.CHM(n),e.oxw().closeModal()}),e._UZ(4,"i",22),e._uU(5," Cancel "),e.qZA()(),e.TgZ(6,"ion-title"),e._uU(7),e.qZA(),e.TgZ(8,"ion-buttons",23)(9,"ion-button",24),e.NdJ("click",function(){return e.CHM(n),e.oxw().saveAgency()}),e._UZ(10,"i",25),e._uU(11," Save "),e.qZA()()()(),e.TgZ(12,"ion-content",26)(13,"ion-item",27),e._UZ(14,"ion-icon",28),e.TgZ(15,"ion-label",29),e._uU(16,"Name"),e.qZA(),e.TgZ(17,"ion-input",30),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().selectedAgency.name=o}),e.qZA()(),e._UZ(18,"br"),e.TgZ(19,"ion-item",27),e._UZ(20,"ion-icon",31),e.TgZ(21,"ion-label",29),e._uU(22,"Address"),e.qZA(),e.TgZ(23,"ion-input",30),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().selectedAgency.address=o}),e.qZA()(),e._UZ(24,"br"),e.TgZ(25,"ion-item",27),e._UZ(26,"ion-icon",32),e.TgZ(27,"ion-label",29),e._uU(28,"Contact Email"),e.qZA(),e.TgZ(29,"ion-input",30),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().selectedAgency.contact_email=o}),e.qZA()(),e._UZ(30,"br"),e.TgZ(31,"ion-item",27),e._UZ(32,"ion-icon",33),e.TgZ(33,"ion-label",29),e._uU(34,"Contact Phone"),e.qZA(),e.TgZ(35,"ion-input",30),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().selectedAgency.contact_phone=o}),e.qZA()()()}if(2&i){const n=e.oxw();e.xp6(7),e.Oqu(n.isEdit?"Edit Agency":"Create Agency"),e.xp6(2),e.Q6J("disabled",n.isSaving),e.xp6(8),e.Q6J("ngModel",n.selectedAgency.name),e.xp6(6),e.Q6J("ngModel",n.selectedAgency.address),e.xp6(6),e.Q6J("ngModel",n.selectedAgency.contact_email),e.xp6(6),e.Q6J("ngModel",n.selectedAgency.contact_phone)}}function x(i,r){if(1&i&&(e.TgZ(0,"div",34)(1,"div",35),e._UZ(2,"i",36),e.TgZ(3,"span"),e._uU(4),e.qZA()()()),2&i){const n=e.oxw();e.xp6(4),e.Oqu(n.isLoading?"Loading agencies...":"Saving agency...")}}const h=[{path:"",component:(()=>{class i{constructor(n,t,o,a){this.agencyService=n,this.alertController=t,this.modalController=o,this.alertService=a,this.agencies=[],this.selectedAgency={name:"",address:"",contact_email:"",contact_phone:""},this.isModalOpen=!1,this.isEdit=!1,this.isSaving=!1,this.isLoading=!1}ngOnInit(){this.loadAgencies()}loadAgencies(){var t,n=this;this.isLoading=!0,this.agencyService.getAgencies().subscribe({next:t=>{this.agencies=t,this.isLoading=!1},error:(t=(0,l.Z)(function*(o){yield n.alertService.showError("Error loading agencies",o),n.isLoading=!1}),function(a){return t.apply(this,arguments)})})}openModal(n=!1,t=null){this.isEdit=n,this.selectedAgency=n&&t?{...t}:{name:"",address:"",contact_email:"",contact_phone:""},this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}saveAgency(){var n=this;return(0,l.Z)(function*(){var t;n.isSaving=!0,n.isEdit&&n.selectedAgency.id?n.agencyService.updateAgency(n.selectedAgency.id,n.selectedAgency).subscribe({next:(t=(0,l.Z)(function*(o){yield n.alertService.showSuccess("Agency updated"),n.loadAgencies(),n.closeModal(),n.isSaving=!1}),function(a){return t.apply(this,arguments)}),error:function(){var t=(0,l.Z)(function*(o){yield n.alertService.showError("Error updating agency",o),n.isSaving=!1});return function(a){return t.apply(this,arguments)}}()}):n.agencyService.createAgency(n.selectedAgency).subscribe({next:function(){var t=(0,l.Z)(function*(o){yield n.alertService.showSuccess("Agency created"),n.loadAgencies(),n.closeModal(),n.isSaving=!1});return function(a){return t.apply(this,arguments)}}(),error:function(){var t=(0,l.Z)(function*(o){yield n.alertService.showError("Error creating agency",o),n.isSaving=!1});return function(a){return t.apply(this,arguments)}}()})})()}deleteAgency(n){var t=this;return(0,l.Z)(function*(){void 0!==n&&(yield(yield t.alertController.create({header:"Confirm Delete",message:"Are you sure you want to delete this agency?",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{var a;t.agencyService.deleteAgency(n).subscribe({next:a=>{t.loadAgencies()},error:(a=(0,l.Z)(function*(g){yield t.alertService.showError("Error deleting agency",g)}),function(P){return a.apply(this,arguments)})})}}]})).present())})()}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(p.Y),e.Y36(c.Br),e.Y36(c.IN),e.Y36(m.c))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-agency"]],viewQuery:function(n,t){if(1&n&&e.Gf(y,5),2&n){let o;e.iGM(o=e.CRH())&&(t.modal=o.first)}},decls:32,vars:3,consts:[["slot","start"],[1,"ion-padding"],[1,"page-content","animate__animated","animate__fadeIn"],["expand","block",1,"create-button","animate__animated","animate__bounceIn",3,"click"],[1,"fas","fa-plus-circle"],[1,"animate__animated","animate__fadeIn"],[1,"header-row"],["size","3"],[1,"fas","fa-building"],[1,"fas","fa-map-marker-alt"],[1,"fas","fa-envelope"],["size","2"],[1,"fas","fa-phone"],["size","1"],[1,"fas","fa-cogs"],[4,"ngFor","ngForOf"],[1,"agency-modal",3,"isOpen","didDismiss"],["class","loading-overlay",4,"ngIf"],[1,"fas","fa-edit","action-icon",3,"click"],[1,"fas","fa-trash","action-icon",3,"click"],[1,"modal-header"],[1,"modal-button",3,"click"],[1,"fas","fa-times"],["slot","end"],[1,"modal-button",3,"disabled","click"],[1,"fas","fa-save"],[1,"ion-padding","modal-content"],[1,"modal-item"],["name","business","slot","start",1,"fas","fa-building"],["position","floating"],[3,"ngModel","ngModelChange"],["name","location-outline","slot","start",1,"fas","fa-map-marker-alt"],["name","mail-outline","slot","start",1,"fas","fa-envelope"],["name","call-outline","slot","start",1,"fas","fa-phone"],[1,"loading-overlay"],[1,"loading-spinner"],[1,"fas","fa-spinner","fa-spin"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Agency"),e.qZA()()(),e.TgZ(6,"ion-content",1)(7,"div",2)(8,"ion-button",3),e.NdJ("click",function(){return t.openModal(!1)}),e._UZ(9,"i",4),e._uU(10," Create New Agency "),e.qZA(),e.TgZ(11,"ion-grid",5)(12,"ion-row",6)(13,"ion-col",7),e._UZ(14,"i",8),e._uU(15," Name"),e.qZA(),e.TgZ(16,"ion-col",7),e._UZ(17,"i",9),e._uU(18," Address"),e.qZA(),e.TgZ(19,"ion-col",7),e._UZ(20,"i",10),e._uU(21," Email"),e.qZA(),e.TgZ(22,"ion-col",11),e._UZ(23,"i",12),e._uU(24," Phone"),e.qZA(),e.TgZ(25,"ion-col",13),e._UZ(26,"i",14),e._uU(27," Actions"),e.qZA()(),e.YNc(28,A,12,4,"ion-row",15),e.qZA(),e.TgZ(29,"ion-modal",16),e.NdJ("didDismiss",function(){return t.closeModal()}),e.YNc(30,Z,36,6,"ng-template"),e.qZA()(),e.YNc(31,x,5,1,"div",17),e.qZA()),2&n&&(e.xp6(28),e.Q6J("ngForOf",t.agencies),e.xp6(1),e.Q6J("isOpen",t.isModalOpen),e.xp6(2),e.Q6J("ngIf",t.isLoading||t.isSaving))},directives:[c.Gu,c.sr,c.Sm,c.fG,c.wd,c.W2,c.YG,c.jY,c.Nd,c.wI,d.sg,c.ki,c.Ie,c.gu,c.Q$,c.pK,c.j9,u.JJ,u.On,d.O5],styles:[".header-row[_ngcontent-%COMP%]{font-weight:700;background-color:#f4f5f8;border-bottom:1px solid #ddd}ion-col[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;padding:8px}.fa[_ngcontent-%COMP%]{font-size:18px;margin-right:8px}.action-icon[_ngcontent-%COMP%]{margin-right:16px;cursor:pointer}.action-icon[_ngcontent-%COMP%]:hover{animation:pulse .5s}.fa-edit[_ngcontent-%COMP%]{color:#428cff}.fa-trash[_ngcontent-%COMP%]{color:#ff4961}.create-button[_ngcontent-%COMP%]{margin-bottom:16px}@media (min-width: 768px){.create-button[_ngcontent-%COMP%]{max-width:300px;margin:0 auto 16px}}.agency-modal[_ngcontent-%COMP%]{--background: #ffffff;--box-shadow: 0 4px 8px rgba(0, 0, 0, .2);--border-radius: 8px;--max-width: 600px;margin:auto}.modal-header[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #428cff, #6b7280);--color: #ffffff}.modal-button[_ngcontent-%COMP%]{--border-radius: 20px;--padding-start: 12px;--padding-end: 12px;margin:0 8px}.modal-content[_ngcontent-%COMP%]{--background: #f9fafb;--padding-start: 16px;--padding-end: 16px}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);display:flex;justify-content:center;align-items:center;z-index:1000}.loading-spinner[_ngcontent-%COMP%]{background:#ffffff;padding:16px;border-radius:8px;display:flex;align-items:center;gap:8px}.loading-spinner[_ngcontent-%COMP%]   .fa-spinner[_ngcontent-%COMP%]{font-size:24px;color:#428cff}.loading-spinner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;color:#333}.page-content[_ngcontent-%COMP%]{animation-duration:.5s}"]}),i})()}];let M=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[f.Bz.forChild(h)],f.Bz]}),i})(),v=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,u.u5,c.Pc,M]]}),i})()}}]);