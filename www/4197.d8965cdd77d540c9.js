"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4197],{4197:(U,f,s)=>{s.r(f),s.d(f,{AgencyPageModule:()=>w});var d=s(6895),c=s(4556),u=s(433),_=s(3013),l=s(5861),e=s(8256),p=s(3949),m=s(5970),y=s(7556);const h=["modal"];function A(i,r){1&i&&e._UZ(0,"ion-icon",19)}function x(i,r){1&i&&e._UZ(0,"ion-icon",20)}function Z(i,r){1&i&&(e.TgZ(0,"div",21),e._UZ(1,"div",22),e.qZA())}function v(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"ion-row")(1,"ion-col",9),e._uU(2),e.qZA(),e.TgZ(3,"ion-col",9),e._uU(4),e.qZA(),e.TgZ(5,"ion-col",9),e._uU(6),e.qZA(),e.TgZ(7,"ion-col",13),e._uU(8),e.qZA(),e.TgZ(9,"ion-col",15)(10,"i",23),e.NdJ("click",function(){const a=e.CHM(n).$implicit;return e.oxw().openModal(!0,a)}),e.qZA(),e.TgZ(11,"i",24),e.NdJ("click",function(){const a=e.CHM(n).$implicit;return e.oxw().deleteAgency(a.id)}),e.qZA()()()}if(2&i){const n=r.$implicit;e.xp6(2),e.Oqu(n.name),e.xp6(2),e.Oqu(n.address),e.xp6(2),e.Oqu(n.contact_email),e.xp6(2),e.Oqu(n.contact_phone)}}function b(i,r){1&i&&e._UZ(0,"ion-icon",39)}function M(i,r){1&i&&e._UZ(0,"ion-icon",20)}function C(i,r){if(1&i){const n=e.EpF();e.TgZ(0,"ion-header")(1,"ion-toolbar",25)(2,"ion-buttons",0)(3,"ion-button",26),e.NdJ("click",function(){return e.CHM(n),e.oxw().closeModal()}),e._UZ(4,"i",27),e._uU(5," Cancel "),e.qZA()(),e.TgZ(6,"ion-title"),e._uU(7),e.qZA(),e.TgZ(8,"ion-buttons",28)(9,"ion-button",29),e.NdJ("click",function(){return e.CHM(n),e.oxw().saveAgency()}),e.YNc(10,b,1,0,"ion-icon",30),e.YNc(11,M,1,0,"ion-icon",5),e._uU(12),e.qZA()()()(),e.TgZ(13,"ion-content",31)(14,"ion-item",32),e._UZ(15,"ion-icon",33),e.TgZ(16,"ion-label",34),e._uU(17,"Name"),e.qZA(),e.TgZ(18,"ion-input",35),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().selectedAgency.name=o}),e.qZA()(),e._UZ(19,"br"),e.TgZ(20,"ion-item",32),e._UZ(21,"ion-icon",36),e.TgZ(22,"ion-label",34),e._uU(23,"Address"),e.qZA(),e.TgZ(24,"ion-input",35),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().selectedAgency.address=o}),e.qZA()(),e._UZ(25,"br"),e.TgZ(26,"ion-item",32),e._UZ(27,"ion-icon",37),e.TgZ(28,"ion-label",34),e._uU(29,"Contact Email"),e.qZA(),e.TgZ(30,"ion-input",35),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().selectedAgency.contact_email=o}),e.qZA()(),e._UZ(31,"br"),e.TgZ(32,"ion-item",32),e._UZ(33,"ion-icon",38),e.TgZ(34,"ion-label",34),e._uU(35,"Contact Phone"),e.qZA(),e.TgZ(36,"ion-input",35),e.NdJ("ngModelChange",function(o){return e.CHM(n),e.oxw().selectedAgency.contact_phone=o}),e.qZA()()()}if(2&i){const n=e.oxw();e.xp6(7),e.Oqu(n.isEdit?"Edit Agency":"Create Agency"),e.xp6(2),e.Q6J("disabled",n.isSaving),e.xp6(1),e.Q6J("ngIf",!n.isSaving),e.xp6(1),e.Q6J("ngIf",n.isSaving),e.xp6(1),e.hij(" ",n.isSaving?"Saving agency...":"Save"," "),e.xp6(6),e.Q6J("ngModel",n.selectedAgency.name),e.xp6(6),e.Q6J("ngModel",n.selectedAgency.address),e.xp6(6),e.Q6J("ngModel",n.selectedAgency.contact_email),e.xp6(6),e.Q6J("ngModel",n.selectedAgency.contact_phone)}}const T=[{path:"",component:(()=>{class i{constructor(n,t,o,a,g){this.agencyService=n,this.alertController=t,this.modalController=o,this.alertService=a,this.authService=g,this.agencies=[],this.selectedAgency={name:"",address:"",contact_email:"",contact_phone:""},this.isModalOpen=!1,this.isEdit=!1,this.isSaving=!1,this.isTableLoading=!1,this.isButtonLoading=!1}ngOnInit(){this.loadAgencies()}loadAgencies(){var t,n=this;this.isTableLoading=!0,this.agencyService.getAgencies().subscribe({next:t=>{this.agencies=t,this.isTableLoading=!1},error:(t=(0,l.Z)(function*(o){401===o.status?yield n.authService.logout():yield n.alertService.showError("Error loading agencies",o),n.isTableLoading=!1}),function(a){return t.apply(this,arguments)})})}openModal(n=!1,t=null){this.isEdit=n,this.selectedAgency=n&&t?{...t}:{name:"",address:"",contact_email:"",contact_phone:""},this.isModalOpen=!0}closeModal(){this.isModalOpen=!1}saveAgency(){var n=this;return(0,l.Z)(function*(){var t;n.isSaving=!0,n.isEdit&&n.selectedAgency.id?n.agencyService.updateAgency(n.selectedAgency.id,n.selectedAgency).subscribe({next:(t=(0,l.Z)(function*(o){yield n.alertService.showSuccess("Agency updated"),n.loadAgencies(),n.closeModal(),n.isSaving=!1}),function(a){return t.apply(this,arguments)}),error:function(){var t=(0,l.Z)(function*(o){401===o.status?yield n.authService.logout():yield n.alertService.showError("Error updating agency",o),n.isSaving=!1});return function(a){return t.apply(this,arguments)}}()}):(n.isButtonLoading=!0,n.agencyService.createAgency(n.selectedAgency).subscribe({next:function(){var t=(0,l.Z)(function*(o){yield n.alertService.showSuccess("Agency created"),n.loadAgencies(),n.closeModal(),n.isSaving=!1,n.isButtonLoading=!1});return function(a){return t.apply(this,arguments)}}(),error:function(){var t=(0,l.Z)(function*(o){401===o.status?yield n.authService.logout():yield n.alertService.showError("Error creating agency",o),n.isSaving=!1,n.isButtonLoading=!1});return function(a){return t.apply(this,arguments)}}()}))})()}deleteAgency(n){var t=this;return(0,l.Z)(function*(){void 0!==n&&(yield(yield t.alertController.create({header:"Confirm Delete",message:"Are you sure you want to delete this agency?",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{var a;t.agencyService.deleteAgency(n).subscribe({next:a=>{t.loadAgencies()},error:(a=(0,l.Z)(function*(g){401===g.status?yield t.authService.logout():yield t.alertService.showError("Error deleting agency",g)}),function(S){return a.apply(this,arguments)})})}}]})).present())})()}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(p.Y),e.Y36(c.Br),e.Y36(c.IN),e.Y36(m.c),e.Y36(y.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-agency"]],viewQuery:function(n,t){if(1&n&&e.Gf(h,5),2&n){let o;e.iGM(o=e.CRH())&&(t.modal=o.first)}},decls:33,vars:7,consts:[["slot","start"],[1,"ion-padding"],[1,"page-content","animate__animated","animate__fadeIn"],["expand","block",1,"create-button","animate__animated","animate__bounceIn",3,"disabled","click"],["name","add-circle-outline","slot","start","class","fas fa-plus-circle",4,"ngIf"],["name","loading","slot","start","class","fas fa-spinner fa-spin",4,"ngIf"],["class","loading-bar",4,"ngIf"],[1,"animate__animated","animate__fadeIn"],[1,"header-row"],["size","3"],[1,"fas","fa-building"],[1,"fas","fa-map-marker-alt"],[1,"fas","fa-envelope"],["size","2"],[1,"fas","fa-phone"],["size","1"],[1,"fas","fa-cogs"],[4,"ngFor","ngForOf"],[1,"agency-modal",3,"isOpen","didDismiss"],["name","add-circle-outline","slot","start",1,"fas","fa-plus-circle"],["name","loading","slot","start",1,"fas","fa-spinner","fa-spin"],[1,"loading-bar"],[1,"loading-progress"],[1,"fas","fa-edit","action-icon",3,"click"],[1,"fas","fa-trash","action-icon",3,"click"],[1,"modal-header"],[1,"modal-button",3,"click"],[1,"fas","fa-times"],["slot","end"],[1,"modal-button",3,"disabled","click"],["name","save-outline","slot","start","class","fas fa-save",4,"ngIf"],[1,"ion-padding","modal-content"],[1,"modal-item"],["name","business","slot","start",1,"fas","fa-building"],["position","floating"],[3,"ngModel","ngModelChange"],["name","location-outline","slot","start",1,"fas","fa-map-marker-alt"],["name","mail-outline","slot","start",1,"fas","fa-envelope"],["name","call-outline","slot","start",1,"fas","fa-phone"],["name","save-outline","slot","start",1,"fas","fa-save"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Agency"),e.qZA()()(),e.TgZ(6,"ion-content",1)(7,"div",2)(8,"ion-button",3),e.NdJ("click",function(){return t.openModal(!1)}),e.YNc(9,A,1,0,"ion-icon",4),e.YNc(10,x,1,0,"ion-icon",5),e._uU(11),e.qZA(),e.YNc(12,Z,2,0,"div",6),e.TgZ(13,"ion-grid",7)(14,"ion-row",8)(15,"ion-col",9),e._UZ(16,"i",10),e._uU(17," Name"),e.qZA(),e.TgZ(18,"ion-col",9),e._UZ(19,"i",11),e._uU(20," Address"),e.qZA(),e.TgZ(21,"ion-col",9),e._UZ(22,"i",12),e._uU(23," Email"),e.qZA(),e.TgZ(24,"ion-col",13),e._UZ(25,"i",14),e._uU(26," Phone"),e.qZA(),e.TgZ(27,"ion-col",15),e._UZ(28,"i",16),e._uU(29," Actions"),e.qZA()(),e.YNc(30,v,12,4,"ion-row",17),e.qZA(),e.TgZ(31,"ion-modal",18),e.NdJ("didDismiss",function(){return t.closeModal()}),e.YNc(32,C,37,9,"ng-template"),e.qZA()()()),2&n&&(e.xp6(8),e.Q6J("disabled",t.isButtonLoading),e.xp6(1),e.Q6J("ngIf",!t.isButtonLoading),e.xp6(1),e.Q6J("ngIf",t.isButtonLoading),e.xp6(1),e.hij(" ",t.isButtonLoading?"Creating agency...":"Create New Agency"," "),e.xp6(1),e.Q6J("ngIf",t.isTableLoading),e.xp6(18),e.Q6J("ngForOf",t.agencies),e.xp6(1),e.Q6J("isOpen",t.isModalOpen))},directives:[c.Gu,c.sr,c.Sm,c.fG,c.wd,c.W2,c.YG,d.O5,c.gu,c.jY,c.Nd,c.wI,d.sg,c.ki,c.Ie,c.Q$,c.pK,c.j9,u.JJ,u.On],styles:[".header-row[_ngcontent-%COMP%]{font-weight:700;background-color:#f4f5f8;border-bottom:1px solid #ddd}ion-col[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;padding:8px}.fa[_ngcontent-%COMP%]{font-size:18px;margin-right:8px}.action-icon[_ngcontent-%COMP%]{margin-right:16px;cursor:pointer}.action-icon[_ngcontent-%COMP%]:hover{animation:pulse .5s}.fa-edit[_ngcontent-%COMP%]{color:#428cff}.fa-trash[_ngcontent-%COMP%]{color:#ff4961}.create-button[_ngcontent-%COMP%]{margin-bottom:16px}@media (min-width: 768px){.create-button[_ngcontent-%COMP%]{max-width:300px;margin:0 auto 16px}}.agency-modal[_ngcontent-%COMP%]{--background: #ffffff;--box-shadow: 0 4px 8px rgba(0, 0, 0, .2);--border-radius: 8px;--max-width: 600px;margin:auto}.modal-header[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #428cff, #6b7280);--color: #ffffff}.modal-button[_ngcontent-%COMP%]{--border-radius: 20px;--padding-start: 12px;--padding-end: 12px;margin:0 8px;display:flex;align-items:center;justify-content:center}.modal-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:18px;color:#fff}.modal-content[_ngcontent-%COMP%]{--background: #f9fafb;--padding-start: 16px;--padding-end: 16px}.modal-item[_ngcontent-%COMP%]{--background: #ffffff;--border-color: #ddd;--border-width: 0 0 1px 0;margin-bottom:16px;padding:8px 0}.loading-bar[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:8px auto;height:4px;background:#e5e7eb;overflow:hidden;border-radius:2px}.loading-progress[_ngcontent-%COMP%]{width:100%;height:100%;background:#428cff;animation:loading 2s linear infinite}@keyframes loading{0%{transform:translate(-100%)}to{transform:translate(100%)}}.page-content[_ngcontent-%COMP%]{animation-duration:.5s}"]}),i})()}];let P=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[_.Bz.forChild(T)],_.Bz]}),i})(),w=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[d.ez,u.u5,c.Pc,P]]}),i})()}}]);